{"ast":null,"code":"import _asyncToGenerator from \"/Users/vinithyareddy/Desktop/projects/my github projects/project-dashboard/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { inject } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { MatToolbarModule } from '@angular/material/toolbar';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatMenuModule } from '@angular/material/menu';\nimport { MatDialog, MatDialogModule } from '@angular/material/dialog';\nimport { RouterModule } from '@angular/router';\nimport { ChangePasswordDialogComponent } from 'src/app/change-password-dialog/change-password-dialog.component';\nimport { MatDividerModule } from '@angular/material/divider';\nimport { MatProgressSpinnerModule } from '@angular/material/progress-spinner';\nimport * as XLSX from 'xlsx';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/auth.service\";\nimport * as i2 from \"src/app/services/firestore.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/material/snack-bar\";\nimport * as i5 from \"src/app/services/refresh.service\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"@angular/material/icon\";\nimport * as i8 from \"@angular/material/button\";\nimport * as i9 from \"@angular/material/menu\";\nfunction HeaderComponent_ng_container_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ÉµÉµgetCurrentView();\n    i0.ÉµÉµelementContainerStart(0);\n    i0.ÉµÉµelementStart(1, \"button\", 4)(2, \"mat-icon\");\n    i0.ÉµÉµtext(3, \"account_circle\");\n    i0.ÉµÉµelementEnd()();\n    i0.ÉµÉµelementStart(4, \"mat-menu\", null, 5)(6, \"button\", 6)(7, \"mat-icon\", 7);\n    i0.ÉµÉµtext(8, \"mail\");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(9, \"span\")(10, \"strong\");\n    i0.ÉµÉµtext(11, \"Email:\");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµtext(12);\n    i0.ÉµÉµelementEnd()();\n    i0.ÉµÉµelementStart(13, \"button\", 8);\n    i0.ÉµÉµlistener(\"click\", function HeaderComponent_ng_container_2_Template_button_click_13_listener() {\n      i0.ÉµÉµrestoreView(_r6);\n      const ctx_r5 = i0.ÉµÉµnextContext();\n      return i0.ÉµÉµresetView(ctx_r5.openChangePasswordDialog());\n    });\n    i0.ÉµÉµelementStart(14, \"mat-icon\", 9);\n    i0.ÉµÉµtext(15, \"lock\");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(16, \"span\");\n    i0.ÉµÉµtext(17, \"Change Password\");\n    i0.ÉµÉµelementEnd()();\n    i0.ÉµÉµelementStart(18, \"button\", 8);\n    i0.ÉµÉµlistener(\"click\", function HeaderComponent_ng_container_2_Template_button_click_18_listener() {\n      i0.ÉµÉµrestoreView(_r6);\n      const ctx_r7 = i0.ÉµÉµnextContext();\n      return i0.ÉµÉµresetView(ctx_r7.logout());\n    });\n    i0.ÉµÉµelementStart(19, \"mat-icon\", 10);\n    i0.ÉµÉµtext(20, \"logout\");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(21, \"span\");\n    i0.ÉµÉµtext(22, \"Logout\");\n    i0.ÉµÉµelementEnd()()();\n    i0.ÉµÉµelementContainerEnd();\n  }\n  if (rf & 2) {\n    const user_r3 = ctx.ngIf;\n    const _r4 = i0.ÉµÉµreference(5);\n    i0.ÉµÉµadvance(1);\n    i0.ÉµÉµproperty(\"matMenuTriggerFor\", _r4);\n    i0.ÉµÉµadvance(11);\n    i0.ÉµÉµtextInterpolate1(\" \", user_r3.email, \"\");\n  }\n}\nconst _c0 = function () {\n  return [\"/auth\"];\n};\nfunction HeaderComponent_ng_template_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelementStart(0, \"button\", 11)(1, \"mat-icon\", 12);\n    i0.ÉµÉµtext(2, \"login\");\n    i0.ÉµÉµelementEnd()();\n  }\n  if (rf & 2) {\n    i0.ÉµÉµproperty(\"routerLink\", i0.ÉµÉµpureFunction0(1, _c0));\n  }\n}\nexport class HeaderComponent {\n  constructor(authService, firestoreService, router, snackBar, refreshService) {\n    this.authService = authService;\n    this.firestoreService = firestoreService;\n    this.router = router;\n    this.snackBar = snackBar;\n    this.refreshService = refreshService;\n    this.isUploading = false;\n    this.fileMessage = '';\n    this.dialog = inject(MatDialog);\n    this.user$ = authService.getUser();\n  }\n  logout() {\n    this.authService.logout().then(() => this.router.navigate(['/auth']));\n  }\n  openChangePasswordDialog() {\n    this.dialog.open(ChangePasswordDialogComponent, {\n      width: '800px',\n      maxWidth: '95vw',\n      panelClass: 'custom-dialog-container',\n      disableClose: false,\n      autoFocus: true\n    });\n  }\n  onFileUpload(event) {\n    var _this = this;\n    console.log('ðŸ“ File upload triggered');\n    this.isUploading = true;\n    const file = event.target.files[0];\n    if (!file) return;\n    const allowedTypes = ['application/vnd.openxmlformats-officedocument.spreadsheetml.sheet', 'application/vnd.ms-excel', 'text/csv', 'application/csv'];\n    if (!allowedTypes.includes(file.type)) {\n      this.showError('âŒ File type not supported. Please upload Excel or CSV.');\n      this.isUploading = false;\n      return;\n    }\n    const reader = new FileReader();\n    reader.onload = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator(function* (e) {\n        console.log('ðŸ“– FileReader loaded');\n        const data = new Uint8Array(e.target.result);\n        let workbook;\n        try {\n          if (file.type.includes('csv')) {\n            const text = new TextDecoder('utf-8').decode(data);\n            workbook = XLSX.read(text, {\n              type: 'string'\n            });\n            console.log('ðŸ“„ CSV parsed');\n          } else {\n            workbook = XLSX.read(data, {\n              type: 'array'\n            });\n            console.log('ðŸ“Š Excel parsed');\n          }\n          console.log('ðŸ“– Sheet Names:', workbook.SheetNames);\n          const [existingProjects, existingTasks, existingTeam] = yield Promise.all([_this.firestoreService.getProjects().toPromise().then(p => p || []), _this.firestoreService.getTasks().toPromise().then(t => t || []), _this.firestoreService.getTeamMembers().toPromise().then(tm => tm || [])]);\n          workbook.SheetNames.forEach(sheetName => {\n            const raw = XLSX.utils.sheet_to_json(workbook.Sheets[sheetName], {\n              header: 1\n            });\n            if (!raw || raw.length < 2 || !raw[0] || raw[0].length === 0) return;\n            const headers = raw[0].map(h => h?.toString().trim().toLowerCase().replace(/[^a-z0-9_]/g, ''));\n            const json = raw.slice(1).map(row => headers.reduce((obj, key, i) => {\n              obj[key] = row[i];\n              return obj;\n            }, {}));\n            const normalizedSheet = sheetName.trim().toLowerCase();\n            console.log(`ðŸ“‹ Processing \"${normalizedSheet}\"`, json);\n            switch (normalizedSheet) {\n              case 'projects':\n                json.forEach(item => {\n                  if (!item.name || !item.duedate) return; // âœ… This is okay, we keep it as is\n                  const project = {\n                    name: item.name.trim(),\n                    assignee: item.assignee?.trim() || 'Unassigned',\n                    description: item.description || '',\n                    status: item.status || 'Not Started',\n                    dueDate: _this.convertToDate(item.duedate)\n                  };\n                  const isDuplicate = existingProjects.some(p => p.name === project.name && _this.convertToDate(p.dueDate).getTime() === project.dueDate.getTime());\n                  if (!isDuplicate) {\n                    _this.firestoreService.addProject(project).subscribe({\n                      next: () => _this.showSuccess(`âœ… Project \"${project.name}\" added`),\n                      error: () => _this.showError(`âŒ Failed to upload project: ${project.name}`)\n                    });\n                  }\n                });\n                break;\n              case 'tasks':\n                json.forEach(item => {\n                  if (!item.name || !item.duedate) return;\n                  const task = {\n                    name: _this.capitalize(item.name.trim()),\n                    assignee: _this.capitalize(item.assignee?.trim() || 'Unassigned'),\n                    dueDate: _this.convertToDate(item.duedate),\n                    status: item.status || 'Not Started'\n                  };\n                  const isDuplicate = existingTasks.some(t => t.name === task.name && t.assignee === task.assignee && _this.convertToDate(t.dueDate).getTime() === _this.convertToDate(task.dueDate).getTime());\n                  if (!isDuplicate) {\n                    _this.firestoreService.addTask(task).subscribe({\n                      next: () => _this.showSuccess(`âœ… Task \"${task.name}\" added`),\n                      error: () => _this.showError(`âŒ Failed to upload task: ${task.name}`)\n                    });\n                  }\n                });\n                break;\n              case 'team':\n                json.forEach(item => {\n                  if (!item.name || !item.role) return;\n                  const member = {\n                    name: _this.capitalize(item.name.trim()),\n                    role: _this.capitalize(item.role.trim()),\n                    emails: item.email ? [item.email.trim().toLowerCase()] : [],\n                    avatarColor: _this.getRandomColor()\n                  };\n                  const isDuplicate = existingTeam.some(m => m.name === member.name && m.role === member.role || member.emails.length && m.emails.includes(member.emails[0]));\n                  if (!isDuplicate) {\n                    _this.firestoreService.addTeamMember(member).subscribe({\n                      next: () => _this.showSuccess(`âœ… Team Member \"${member.name}\" added`),\n                      error: () => _this.showError(`âŒ Failed to upload team member: ${member.name}`)\n                    });\n                  }\n                });\n                break;\n              default:\n                console.warn(`âš ï¸ Unrecognized sheet: \"${sheetName}\"`);\n            }\n          });\n          _this.refreshService.triggerRefresh(); // ðŸ” Trigger UI update\n          _this.showSuccess('âœ… File uploaded and processed successfully.');\n        } catch (error) {\n          console.error('âŒ Parsing failed', error);\n          _this.showError('âŒ Failed to process the file.');\n        }\n        _this.isUploading = false;\n      });\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n    reader.onerror = () => {\n      this.showError('âŒ Error uploading file. Please try again.');\n      this.isUploading = false;\n    };\n    reader.readAsArrayBuffer(file);\n  }\n  convertToDate(value) {\n    if (!value) return new Date();\n    if (typeof value === 'object' && 'seconds' in value) return new Date(value.seconds * 1000);\n    const parsed = new Date(value);\n    return isNaN(parsed.getTime()) ? new Date() : parsed;\n  }\n  capitalize(text) {\n    return text.charAt(0).toUpperCase() + text.slice(1).toLowerCase();\n  }\n  getRandomColor() {\n    const letters = '0123456789ABCDEF';\n    return '#' + Array.from({\n      length: 6\n    }, () => letters[Math.floor(Math.random() * 16)]).join('');\n  }\n  showSuccess(message) {\n    this.snackBar.open(message, 'Close', {\n      duration: 4000,\n      panelClass: 'snackbar-success'\n    });\n  }\n  showError(message) {\n    this.snackBar.open(message, 'Close', {\n      duration: 4000,\n      panelClass: 'snackbar-error'\n    });\n  }\n  static {\n    this.Éµfac = function HeaderComponent_Factory(t) {\n      return new (t || HeaderComponent)(i0.ÉµÉµdirectiveInject(i1.AuthService), i0.ÉµÉµdirectiveInject(i2.FirestoreService), i0.ÉµÉµdirectiveInject(i3.Router), i0.ÉµÉµdirectiveInject(i4.MatSnackBar), i0.ÉµÉµdirectiveInject(i5.RefreshService));\n    };\n  }\n  static {\n    this.Éµcmp = /*@__PURE__*/i0.ÉµÉµdefineComponent({\n      type: HeaderComponent,\n      selectors: [[\"app-header\"]],\n      standalone: true,\n      features: [i0.ÉµÉµStandaloneFeature],\n      decls: 6,\n      vars: 4,\n      consts: [[1, \"header-toolbar\"], [1, \"header-actions\"], [4, \"ngIf\", \"ngIfElse\"], [\"loginBtn\", \"\"], [\"mat-icon-button\", \"\", \"matTooltip\", \"User Menu\", 3, \"matMenuTriggerFor\"], [\"userMenu\", \"matMenu\"], [\"mat-menu-item\", \"\", 1, \"user-info-item\"], [1, \"user-icon\"], [\"mat-menu-item\", \"\", 3, \"click\"], [\"matTooltip\", \"Change Password\", 1, \"user-icon\"], [\"matTooltip\", \"Logout\", 1, \"user-icon\"], [\"mat-icon-button\", \"\", \"matTooltip\", \"Login\", 3, \"routerLink\"], [\"matTooltip\", \"Login\"]],\n      template: function HeaderComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ÉµÉµelementStart(0, \"div\", 0)(1, \"div\", 1);\n          i0.ÉµÉµtemplate(2, HeaderComponent_ng_container_2_Template, 23, 2, \"ng-container\", 2);\n          i0.ÉµÉµpipe(3, \"async\");\n          i0.ÉµÉµtemplate(4, HeaderComponent_ng_template_4_Template, 3, 2, \"ng-template\", null, 3, i0.ÉµÉµtemplateRefExtractor);\n          i0.ÉµÉµelementEnd()();\n        }\n        if (rf & 2) {\n          const _r1 = i0.ÉµÉµreference(5);\n          i0.ÉµÉµadvance(2);\n          i0.ÉµÉµproperty(\"ngIf\", i0.ÉµÉµpipeBind1(3, 2, ctx.user$))(\"ngIfElse\", _r1);\n        }\n      },\n      dependencies: [CommonModule, i6.NgIf, i6.AsyncPipe, MatToolbarModule, MatIconModule, i7.MatIcon, MatButtonModule, i8.MatIconButton, MatMenuModule, i9.MatMenu, i9.MatMenuItem, i9.MatMenuTrigger, MatDialogModule, RouterModule, i3.RouterLink, MatDividerModule, MatProgressSpinnerModule],\n      styles: [\".header-toolbar[_ngcontent-%COMP%] {\\n  position: fixed;\\n  top: 0;\\n  left: 0;\\n  right: 0;\\n  z-index: 1000;\\n  height: 64px;\\n  display: flex;\\n  margin-right: 85px;\\n  margin-bottom: 30px;\\n  color: #1a1a1a;\\n}\\n.header-toolbar[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%] {\\n  display: flex;\\n  align-items: center;\\n  gap: 1rem;\\n  margin-left: auto;\\n}\\n.header-toolbar[_ngcontent-%COMP%]   .mat-icon-button[_ngcontent-%COMP%] {\\n  color: #3f51b5;\\n}\\n\\nmat-icon[_ngcontent-%COMP%] {\\n  font-size: 42px;\\n  width: 42px;\\n  height: 42px;\\n  color: #555 !important;\\n  margin-left: -1rem;\\n}\\n\\n  .mat-menu-panel {\\n  background-color: #ffffff !important;\\n  color: #1a1a1a !important;\\n  padding: 0.5rem 1rem;\\n  border-radius: 12px;\\n  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15);\\n  min-width: 260px;\\n}\\n\\n  .mat-menu-item {\\n  display: flex;\\n  align-items: center;\\n  gap: 8px;\\n  font-size: 14px;\\n  padding: 6px 16px;\\n  color: #333 !important;\\n}\\n  .mat-menu-item mat-icon.user-icon {\\n  font-size: 18px !important;\\n  min-width: 20px;\\n  color: #555 !important;\\n}\\n  .mat-menu-item span {\\n  font-size: 13px;\\n  line-height: 1.3;\\n  color: #333;\\n}\\n\\n.user-info-item[_ngcontent-%COMP%] {\\n  display: flex;\\n  align-items: center;\\n  padding-left: 12px;\\n  margin-bottom: 6px;\\n  gap: 8px;\\n}\\n.user-info-item[_ngcontent-%COMP%]   mat-icon.user-icon[_ngcontent-%COMP%] {\\n  font-size: 18px !important;\\n  color: #666 !important;\\n  min-width: 20px;\\n  text-align: center;\\n  margin-left: 7px;\\n  margin-top: 5px;\\n}\\n.user-info-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] {\\n  font-size: 13px;\\n  color: #333;\\n  line-height: 1.4;\\n}\\n\\n.user-icon[_ngcontent-%COMP%] {\\n  font-size: 18px !important;\\n  color: #666 !important;\\n  margin-left: 10px;\\n}\\n\\n  .snackbar-success {\\n  background-color: #1abc9c !important;\\n  color: #ffffff !important;\\n  font-weight: 500;\\n}\\n\\n  .snackbar-error {\\n  background-color: #e74c3c !important;\\n  color: #ffffff !important;\\n  font-weight: 500;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvaGVhZGVyL2hlYWRlci5jb21wb25lbnQuc2NzcyIsIndlYnBhY2s6Ly8uLy4uLy4uL215JTIwZ2l0aHViJTIwcHJvamVjdHMvcHJvamVjdC1kYXNoYm9hcmQvc3JjL2FwcC9oZWFkZXIvaGVhZGVyLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsZUFBQTtFQUNBLE1BQUE7RUFDQSxPQUFBO0VBQ0EsUUFBQTtFQUNBLGFBQUE7RUFDQSxZQUFBO0VBQ0EsYUFBQTtFQUNBLGtCQUFBO0VBQ0EsbUJBQUE7RUFDQSxjQUFBO0FDQ0Y7QURDRTtFQUNFLGFBQUE7RUFDQSxtQkFBQTtFQUNBLFNBQUE7RUFDQSxpQkFBQTtBQ0NKO0FERUU7RUFDRSxjQUFBO0FDQUo7O0FESUE7RUFDRSxlQUFBO0VBQ0EsV0FBQTtFQUNBLFlBQUE7RUFDQSxzQkFBQTtFQUNBLGtCQUFBO0FDREY7O0FESUE7RUFDRSxvQ0FBQTtFQUNBLHlCQUFBO0VBQ0Esb0JBQUE7RUFDQSxtQkFBQTtFQUNBLDBDQUFBO0VBQ0EsZ0JBQUE7QUNERjs7QURJQTtFQUNFLGFBQUE7RUFDQSxtQkFBQTtFQUNBLFFBQUE7RUFDQSxlQUFBO0VBQ0EsaUJBQUE7RUFDQSxzQkFBQTtBQ0RGO0FER0U7RUFDRSwwQkFBQTtFQUNBLGVBQUE7RUFDQSxzQkFBQTtBQ0RKO0FESUU7RUFDRSxlQUFBO0VBQ0EsZ0JBQUE7RUFDQSxXQUFBO0FDRko7O0FETUE7RUFDRSxhQUFBO0VBQ0EsbUJBQUE7RUFDQSxrQkFBQTtFQUNBLGtCQUFBO0VBQ0EsUUFBQTtBQ0hGO0FES0U7RUFDRSwwQkFBQTtFQUNBLHNCQUFBO0VBQ0EsZUFBQTtFQUNBLGtCQUFBO0VBQ0EsZ0JBQUE7RUFDQSxlQUFBO0FDSEo7QURNRTtFQUNFLGVBQUE7RUFDQSxXQUFBO0VBQ0EsZ0JBQUE7QUNKSjs7QURRQTtFQUNFLDBCQUFBO0VBQ0Esc0JBQUE7RUFDQSxpQkFBQTtBQ0xGOztBRFFBO0VBQ0Usb0NBQUE7RUFDQSx5QkFBQTtFQUNBLGdCQUFBO0FDTEY7O0FEUUE7RUFDRSxvQ0FBQTtFQUNBLHlCQUFBO0VBQ0EsZ0JBQUE7QUNMRiIsInNvdXJjZXNDb250ZW50IjpbIi5oZWFkZXItdG9vbGJhciB7XG4gIHBvc2l0aW9uOiBmaXhlZDtcbiAgdG9wOiAwO1xuICBsZWZ0OiAwO1xuICByaWdodDogMDtcbiAgei1pbmRleDogMTAwMDtcbiAgaGVpZ2h0OiA2NHB4O1xuICBkaXNwbGF5OiBmbGV4O1xuICBtYXJnaW4tcmlnaHQ6IDg1cHg7XG4gIG1hcmdpbi1ib3R0b206IDMwcHg7XG4gIGNvbG9yOiAjMWExYTFhO1xuXG4gIC5oZWFkZXItYWN0aW9ucyB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIGdhcDogMXJlbTtcbiAgICBtYXJnaW4tbGVmdDogYXV0bztcbiAgfVxuXG4gIC5tYXQtaWNvbi1idXR0b24ge1xuICAgIGNvbG9yOiAjM2Y1MWI1OyAvLyB5b3UgY2FuIGFkanVzdCB0aGlzIGFjY2VudCBjb2xvclxuICB9XG59XG5cbm1hdC1pY29uIHtcbiAgZm9udC1zaXplOiA0MnB4O1xuICB3aWR0aDogNDJweDtcbiAgaGVpZ2h0OiA0MnB4O1xuICBjb2xvcjogIzU1NSAhaW1wb3J0YW50O1xuICBtYXJnaW4tbGVmdDogLTFyZW07XG59XG5cbjo6bmctZGVlcCAubWF0LW1lbnUtcGFuZWwge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmZmZmICFpbXBvcnRhbnQ7XG4gIGNvbG9yOiAjMWExYTFhICFpbXBvcnRhbnQ7XG4gIHBhZGRpbmc6IDAuNXJlbSAxcmVtO1xuICBib3JkZXItcmFkaXVzOiAxMnB4O1xuICBib3gtc2hhZG93OiAwIDRweCAxMHB4IHJnYmEoMCwgMCwgMCwgMC4xNSk7XG4gIG1pbi13aWR0aDogMjYwcHg7XG59XG5cbjo6bmctZGVlcCAubWF0LW1lbnUtaXRlbSB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGdhcDogOHB4O1xuICBmb250LXNpemU6IDE0cHg7XG4gIHBhZGRpbmc6IDZweCAxNnB4O1xuICBjb2xvcjogIzMzMyAhaW1wb3J0YW50O1xuXG4gIG1hdC1pY29uLnVzZXItaWNvbiB7XG4gICAgZm9udC1zaXplOiAxOHB4ICFpbXBvcnRhbnQ7XG4gICAgbWluLXdpZHRoOiAyMHB4O1xuICAgIGNvbG9yOiAjNTU1ICFpbXBvcnRhbnQ7XG4gIH1cblxuICBzcGFuIHtcbiAgICBmb250LXNpemU6IDEzcHg7XG4gICAgbGluZS1oZWlnaHQ6IDEuMztcbiAgICBjb2xvcjogIzMzMztcbiAgfVxufVxuXG4udXNlci1pbmZvLWl0ZW0ge1xuICBkaXNwbGF5OiBmbGV4O1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBwYWRkaW5nLWxlZnQ6IDEycHg7XG4gIG1hcmdpbi1ib3R0b206IDZweDtcbiAgZ2FwOiA4cHg7XG5cbiAgbWF0LWljb24udXNlci1pY29uIHtcbiAgICBmb250LXNpemU6IDE4cHggIWltcG9ydGFudDtcbiAgICBjb2xvcjogIzY2NiAhaW1wb3J0YW50O1xuICAgIG1pbi13aWR0aDogMjBweDtcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgbWFyZ2luLWxlZnQ6IDdweDtcbiAgICBtYXJnaW4tdG9wOiA1cHg7XG4gIH1cblxuICBzcGFuIHtcbiAgICBmb250LXNpemU6IDEzcHg7XG4gICAgY29sb3I6ICMzMzM7XG4gICAgbGluZS1oZWlnaHQ6IDEuNDtcbiAgfVxufVxuXG4udXNlci1pY29uIHtcbiAgZm9udC1zaXplOiAxOHB4ICFpbXBvcnRhbnQ7XG4gIGNvbG9yOiAjNjY2ICFpbXBvcnRhbnQ7XG4gIG1hcmdpbi1sZWZ0OiAxMHB4O1xufVxuXG46Om5nLWRlZXAgLnNuYWNrYmFyLXN1Y2Nlc3Mge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjMWFiYzljICFpbXBvcnRhbnQ7XG4gIGNvbG9yOiAjZmZmZmZmICFpbXBvcnRhbnQ7XG4gIGZvbnQtd2VpZ2h0OiA1MDA7XG59XG5cbjo6bmctZGVlcCAuc25hY2tiYXItZXJyb3Ige1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZTc0YzNjICFpbXBvcnRhbnQ7XG4gIGNvbG9yOiAjZmZmZmZmICFpbXBvcnRhbnQ7XG4gIGZvbnQtd2VpZ2h0OiA1MDA7XG59XG4iLCIuaGVhZGVyLXRvb2xiYXIge1xuICBwb3NpdGlvbjogZml4ZWQ7XG4gIHRvcDogMDtcbiAgbGVmdDogMDtcbiAgcmlnaHQ6IDA7XG4gIHotaW5kZXg6IDEwMDA7XG4gIGhlaWdodDogNjRweDtcbiAgZGlzcGxheTogZmxleDtcbiAgbWFyZ2luLXJpZ2h0OiA4NXB4O1xuICBtYXJnaW4tYm90dG9tOiAzMHB4O1xuICBjb2xvcjogIzFhMWExYTtcbn1cbi5oZWFkZXItdG9vbGJhciAuaGVhZGVyLWFjdGlvbnMge1xuICBkaXNwbGF5OiBmbGV4O1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBnYXA6IDFyZW07XG4gIG1hcmdpbi1sZWZ0OiBhdXRvO1xufVxuLmhlYWRlci10b29sYmFyIC5tYXQtaWNvbi1idXR0b24ge1xuICBjb2xvcjogIzNmNTFiNTtcbn1cblxubWF0LWljb24ge1xuICBmb250LXNpemU6IDQycHg7XG4gIHdpZHRoOiA0MnB4O1xuICBoZWlnaHQ6IDQycHg7XG4gIGNvbG9yOiAjNTU1ICFpbXBvcnRhbnQ7XG4gIG1hcmdpbi1sZWZ0OiAtMXJlbTtcbn1cblxuOjpuZy1kZWVwIC5tYXQtbWVudS1wYW5lbCB7XG4gIGJhY2tncm91bmQtY29sb3I6ICNmZmZmZmYgIWltcG9ydGFudDtcbiAgY29sb3I6ICMxYTFhMWEgIWltcG9ydGFudDtcbiAgcGFkZGluZzogMC41cmVtIDFyZW07XG4gIGJvcmRlci1yYWRpdXM6IDEycHg7XG4gIGJveC1zaGFkb3c6IDAgNHB4IDEwcHggcmdiYSgwLCAwLCAwLCAwLjE1KTtcbiAgbWluLXdpZHRoOiAyNjBweDtcbn1cblxuOjpuZy1kZWVwIC5tYXQtbWVudS1pdGVtIHtcbiAgZGlzcGxheTogZmxleDtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgZ2FwOiA4cHg7XG4gIGZvbnQtc2l6ZTogMTRweDtcbiAgcGFkZGluZzogNnB4IDE2cHg7XG4gIGNvbG9yOiAjMzMzICFpbXBvcnRhbnQ7XG59XG46Om5nLWRlZXAgLm1hdC1tZW51LWl0ZW0gbWF0LWljb24udXNlci1pY29uIHtcbiAgZm9udC1zaXplOiAxOHB4ICFpbXBvcnRhbnQ7XG4gIG1pbi13aWR0aDogMjBweDtcbiAgY29sb3I6ICM1NTUgIWltcG9ydGFudDtcbn1cbjo6bmctZGVlcCAubWF0LW1lbnUtaXRlbSBzcGFuIHtcbiAgZm9udC1zaXplOiAxM3B4O1xuICBsaW5lLWhlaWdodDogMS4zO1xuICBjb2xvcjogIzMzMztcbn1cblxuLnVzZXItaW5mby1pdGVtIHtcbiAgZGlzcGxheTogZmxleDtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgcGFkZGluZy1sZWZ0OiAxMnB4O1xuICBtYXJnaW4tYm90dG9tOiA2cHg7XG4gIGdhcDogOHB4O1xufVxuLnVzZXItaW5mby1pdGVtIG1hdC1pY29uLnVzZXItaWNvbiB7XG4gIGZvbnQtc2l6ZTogMThweCAhaW1wb3J0YW50O1xuICBjb2xvcjogIzY2NiAhaW1wb3J0YW50O1xuICBtaW4td2lkdGg6IDIwcHg7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgbWFyZ2luLWxlZnQ6IDdweDtcbiAgbWFyZ2luLXRvcDogNXB4O1xufVxuLnVzZXItaW5mby1pdGVtIHNwYW4ge1xuICBmb250LXNpemU6IDEzcHg7XG4gIGNvbG9yOiAjMzMzO1xuICBsaW5lLWhlaWdodDogMS40O1xufVxuXG4udXNlci1pY29uIHtcbiAgZm9udC1zaXplOiAxOHB4ICFpbXBvcnRhbnQ7XG4gIGNvbG9yOiAjNjY2ICFpbXBvcnRhbnQ7XG4gIG1hcmdpbi1sZWZ0OiAxMHB4O1xufVxuXG46Om5nLWRlZXAgLnNuYWNrYmFyLXN1Y2Nlc3Mge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjMWFiYzljICFpbXBvcnRhbnQ7XG4gIGNvbG9yOiAjZmZmZmZmICFpbXBvcnRhbnQ7XG4gIGZvbnQtd2VpZ2h0OiA1MDA7XG59XG5cbjo6bmctZGVlcCAuc25hY2tiYXItZXJyb3Ige1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZTc0YzNjICFpbXBvcnRhbnQ7XG4gIGNvbG9yOiAjZmZmZmZmICFpbXBvcnRhbnQ7XG4gIGZvbnQtd2VpZ2h0OiA1MDA7XG59Il0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n    });\n  }\n}","map":{"version":3,"names":["inject","CommonModule","MatToolbarModule","MatIconModule","MatButtonModule","MatMenuModule","MatDialog","MatDialogModule","RouterModule","ChangePasswordDialogComponent","MatDividerModule","MatProgressSpinnerModule","XLSX","i0","ÉµÉµelementContainerStart","ÉµÉµelementStart","ÉµÉµtext","ÉµÉµelementEnd","ÉµÉµlistener","HeaderComponent_ng_container_2_Template_button_click_13_listener","ÉµÉµrestoreView","_r6","ctx_r5","ÉµÉµnextContext","ÉµÉµresetView","openChangePasswordDialog","HeaderComponent_ng_container_2_Template_button_click_18_listener","ctx_r7","logout","ÉµÉµelementContainerEnd","ÉµÉµadvance","ÉµÉµproperty","_r4","ÉµÉµtextInterpolate1","user_r3","email","ÉµÉµpureFunction0","_c0","HeaderComponent","constructor","authService","firestoreService","router","snackBar","refreshService","isUploading","fileMessage","dialog","user$","getUser","then","navigate","open","width","maxWidth","panelClass","disableClose","autoFocus","onFileUpload","event","_this","console","log","file","target","files","allowedTypes","includes","type","showError","reader","FileReader","onload","_ref","_asyncToGenerator","e","data","Uint8Array","result","workbook","text","TextDecoder","decode","read","SheetNames","existingProjects","existingTasks","existingTeam","Promise","all","getProjects","toPromise","p","getTasks","t","getTeamMembers","tm","forEach","sheetName","raw","utils","sheet_to_json","Sheets","header","length","headers","map","h","toString","trim","toLowerCase","replace","json","slice","row","reduce","obj","key","i","normalizedSheet","item","name","duedate","project","assignee","description","status","dueDate","convertToDate","isDuplicate","some","getTime","addProject","subscribe","next","showSuccess","error","task","capitalize","addTask","role","member","emails","avatarColor","getRandomColor","m","addTeamMember","warn","triggerRefresh","_x","apply","arguments","onerror","readAsArrayBuffer","value","Date","seconds","parsed","isNaN","charAt","toUpperCase","letters","Array","from","Math","floor","random","join","message","duration","ÉµÉµdirectiveInject","i1","AuthService","i2","FirestoreService","i3","Router","i4","MatSnackBar","i5","RefreshService","selectors","standalone","features","ÉµÉµStandaloneFeature","decls","vars","consts","template","HeaderComponent_Template","rf","ctx","ÉµÉµtemplate","HeaderComponent_ng_container_2_Template","HeaderComponent_ng_template_4_Template","ÉµÉµtemplateRefExtractor","ÉµÉµpipeBind1","_r1","i6","NgIf","AsyncPipe","i7","MatIcon","i8","MatIconButton","i9","MatMenu","MatMenuItem","MatMenuTrigger","RouterLink","styles"],"sources":["/Users/vinithyareddy/Desktop/projects/my github projects/project-dashboard/src/app/header/header.component.ts","/Users/vinithyareddy/Desktop/projects/my github projects/project-dashboard/src/app/header/header.component.html"],"sourcesContent":["import { Component, inject } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { MatToolbarModule } from '@angular/material/toolbar';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatMenuModule } from '@angular/material/menu';\nimport { MatDialog, MatDialogModule } from '@angular/material/dialog';\nimport { RouterModule, Router } from '@angular/router';\nimport { AuthService } from 'src/app/services/auth.service';\nimport { FirestoreService } from 'src/app/services/firestore.service';\nimport { User } from '@angular/fire/auth';\nimport { Observable } from 'rxjs';\nimport { ChangePasswordDialogComponent } from 'src/app/change-password-dialog/change-password-dialog.component';\nimport { MatDividerModule } from '@angular/material/divider';\nimport { MatSnackBar } from '@angular/material/snack-bar';\nimport { MatProgressSpinnerModule } from '@angular/material/progress-spinner';\nimport * as XLSX from 'xlsx';\nimport { Project } from 'src/app/models/project.model';\nimport { Task } from 'src/app/models/task.model';\nimport { TeamMember } from 'src/app/models/team.model';\nimport { RefreshService } from 'src/app/services/refresh.service';\n\n\n@Component({\n  selector: 'app-header',\n  templateUrl: './header.component.html',\n  styleUrls: ['./header.component.scss'],\n  standalone: true,\n  imports: [\n    CommonModule,\n    MatToolbarModule,\n    MatIconModule,\n    MatButtonModule,\n    MatMenuModule,\n    MatDialogModule,\n    RouterModule,\n    MatDividerModule,\n    MatProgressSpinnerModule\n  ]\n})\nexport class HeaderComponent {\n  user$: Observable<User | null>;\n  isUploading = false;\n  fileMessage: string = '';\n\n  private dialog = inject(MatDialog);\n\n  constructor(\n    public authService: AuthService,\n    private firestoreService: FirestoreService,\n    private router: Router,\n    private snackBar: MatSnackBar,\n    private refreshService: RefreshService\n\n  ) {\n    this.user$ = authService.getUser();\n  }\n\n  logout() {\n    this.authService.logout().then(() => this.router.navigate(['/auth']));\n  }\n\n  openChangePasswordDialog() {\n    this.dialog.open(ChangePasswordDialogComponent, {\n      width: '800px',\n      maxWidth: '95vw',\n      panelClass: 'custom-dialog-container',\n      disableClose: false,\n      autoFocus: true\n    });\n  }\n\n  onFileUpload(event: any) {\n    console.log('ðŸ“ File upload triggered');\n    this.isUploading = true;\n    const file = event.target.files[0];\n    if (!file) return;\n  \n    const allowedTypes = [\n      'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\n      'application/vnd.ms-excel',\n      'text/csv',\n      'application/csv'\n    ];\n  \n    if (!allowedTypes.includes(file.type)) {\n      this.showError('âŒ File type not supported. Please upload Excel or CSV.');\n      this.isUploading = false;\n      return;\n    }\n  \n    const reader = new FileReader();\n    reader.onload = async (e: any) => {\n      console.log('ðŸ“– FileReader loaded');\n      const data = new Uint8Array(e.target.result);\n      let workbook: XLSX.WorkBook;\n  \n      try {\n        if (file.type.includes('csv')) {\n          const text = new TextDecoder('utf-8').decode(data);\n          workbook = XLSX.read(text, { type: 'string' });\n          console.log('ðŸ“„ CSV parsed');\n        } else {\n          workbook = XLSX.read(data, { type: 'array' });\n          console.log('ðŸ“Š Excel parsed');\n        }\n  \n        console.log('ðŸ“– Sheet Names:', workbook.SheetNames);\n  \n        const [existingProjects, existingTasks, existingTeam] = await Promise.all([\n          this.firestoreService.getProjects().toPromise().then(p => p || []),\n          this.firestoreService.getTasks().toPromise().then(t => t || []),\n          this.firestoreService.getTeamMembers().toPromise().then(tm => tm || [])\n        ]);\n  \n        workbook.SheetNames.forEach(sheetName => {\n          const raw = XLSX.utils.sheet_to_json<any>(workbook.Sheets[sheetName], { header: 1 });\n          if (!raw || raw.length < 2 || !raw[0] || raw[0].length === 0) return;\n  \n          const headers = raw[0].map((h: any) =>\n            h?.toString().trim().toLowerCase().replace(/[^a-z0-9_]/g, '')\n          );\n          const json = raw.slice(1).map((row: any[]) =>\n            headers.reduce((obj: any, key: string, i: number) => {\n              obj[key] = row[i];\n              return obj;\n            }, {})\n          );\n  \n          const normalizedSheet = sheetName.trim().toLowerCase();\n          console.log(`ðŸ“‹ Processing \"${normalizedSheet}\"`, json);\n  \n          switch (normalizedSheet) {\n            case 'projects':\n              json.forEach((item: any) => {\n                if (!item.name || !item.duedate) return; // âœ… This is okay, we keep it as is\n                const project: Project = {\n                  name: item.name.trim(),\n                  assignee: item.assignee?.trim() || 'Unassigned', // âœ… fallback\n                  description: item.description || '',\n                  status: item.status || 'Not Started',\n                  dueDate: this.convertToDate(item.duedate)\n                };\n                \n                const isDuplicate = existingProjects.some(p =>\n                  p.name === project.name &&\n                  this.convertToDate(p.dueDate).getTime() === project.dueDate.getTime()\n                );\n                if (!isDuplicate) {\n                  this.firestoreService.addProject(project).subscribe({\n                    next: () => this.showSuccess(`âœ… Project \"${project.name}\" added`),\n                    error: () => this.showError(`âŒ Failed to upload project: ${project.name}`)\n                  });\n                }\n              });\n              break;\n  \n            case 'tasks':\n              json.forEach((item: any) => {\n                if (!item.name || !item.duedate) return;\n                const task: Task = {\n                  name: this.capitalize(item.name.trim()),\n                  assignee: this.capitalize(item.assignee?.trim() || 'Unassigned'), // âœ… fallback\n                  dueDate: this.convertToDate(item.duedate),\n                  status: item.status || 'Not Started'\n                };\n                \n                const isDuplicate = existingTasks.some(t =>\n                  t.name === task.name &&\n                  t.assignee === task.assignee &&\n                  this.convertToDate(t.dueDate).getTime() === this.convertToDate(task.dueDate).getTime()\n                );\n                if (!isDuplicate) {\n                  this.firestoreService.addTask(task).subscribe({\n                    next: () => this.showSuccess(`âœ… Task \"${task.name}\" added`),\n                    error: () => this.showError(`âŒ Failed to upload task: ${task.name}`)\n                  });\n                }\n              });\n              break;\n  \n            case 'team':\n              json.forEach((item: any) => {\n                if (!item.name || !item.role) return;\n                const member: TeamMember = {\n                  name: this.capitalize(item.name.trim()),\n                  role: this.capitalize(item.role.trim()),\n                  emails: item.email ? [item.email.trim().toLowerCase()] : [],\n                  avatarColor: this.getRandomColor()\n                };\n                const isDuplicate = existingTeam.some(m =>\n                  (m.name === member.name && m.role === member.role) ||\n                  (member.emails.length && m.emails.includes(member.emails[0]))\n                );\n                if (!isDuplicate) {\n                  this.firestoreService.addTeamMember(member).subscribe({\n                    next: () => this.showSuccess(`âœ… Team Member \"${member.name}\" added`),\n                    error: () => this.showError(`âŒ Failed to upload team member: ${member.name}`)\n                  });\n                }\n              });\n              break;\n  \n            default:\n              console.warn(`âš ï¸ Unrecognized sheet: \"${sheetName}\"`);\n          }\n        });\n  \n        this.refreshService.triggerRefresh(); // ðŸ” Trigger UI update\n        this.showSuccess('âœ… File uploaded and processed successfully.');\n      } catch (error) {\n        console.error('âŒ Parsing failed', error);\n        this.showError('âŒ Failed to process the file.');\n      }\n  \n      this.isUploading = false;\n    };\n  \n    reader.onerror = () => {\n      this.showError('âŒ Error uploading file. Please try again.');\n      this.isUploading = false;\n    };\n  \n    reader.readAsArrayBuffer(file);\n  }\n  \n  \n\n  private convertToDate(value: any): Date {\n    if (!value) return new Date();\n    if (typeof value === 'object' && 'seconds' in value) return new Date(value.seconds * 1000);\n    const parsed = new Date(value);\n    return isNaN(parsed.getTime()) ? new Date() : parsed;\n  }\n\n  private capitalize(text: string): string {\n    return text.charAt(0).toUpperCase() + text.slice(1).toLowerCase();\n  }\n\n  private getRandomColor(): string {\n    const letters = '0123456789ABCDEF';\n    return '#' + Array.from({ length: 6 }, () => letters[Math.floor(Math.random() * 16)]).join('');\n  }\n\n  showSuccess(message: string) {\n    this.snackBar.open(message, 'Close', {\n      duration: 4000,\n      panelClass: 'snackbar-success'\n    });\n  }\n\n  showError(message: string) {\n    this.snackBar.open(message, 'Close', {\n      duration: 4000,\n      panelClass: 'snackbar-error'\n    });\n  }\n}","<div class=\"header-toolbar\">\n  <div class=\"header-actions\">\n    <!-- ðŸ‘¤ User Icon or Login -->\n    <ng-container *ngIf=\"user$ | async as user; else loginBtn\">\n      <button mat-icon-button [matMenuTriggerFor]=\"userMenu\" matTooltip=\"User Menu\">\n        <mat-icon>account_circle</mat-icon>\n      </button>\n      <mat-menu #userMenu=\"matMenu\">\n        <button mat-menu-item class=\"user-info-item\">\n          <mat-icon class=\"user-icon\">mail</mat-icon>\n          <span><strong>Email:</strong> {{ user.email }}</span>\n        </button>\n        <button mat-menu-item (click)=\"openChangePasswordDialog()\">\n          <mat-icon matTooltip=\"Change Password\" class=\"user-icon\">lock</mat-icon>\n          <span>Change Password</span>\n        </button>\n        <button mat-menu-item (click)=\"logout()\">\n          <mat-icon matTooltip=\"Logout\" class=\"user-icon\">logout</mat-icon>\n          <span>Logout</span>\n        </button>\n      </mat-menu>\n    </ng-container>\n\n    <!-- ðŸ” Login Button -->\n    <ng-template #loginBtn>\n      <button mat-icon-button [routerLink]=\"['/auth']\" matTooltip=\"Login\">\n        <mat-icon matTooltip=\"Login\">login</mat-icon>\n      </button>\n    </ng-template>\n  </div>\n</div>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}