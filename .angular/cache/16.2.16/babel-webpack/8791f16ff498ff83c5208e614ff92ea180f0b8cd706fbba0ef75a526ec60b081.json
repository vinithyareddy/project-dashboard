{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { CommonModule, DatePipe } from '@angular/common';\nimport { ReactiveFormsModule, Validators } from '@angular/forms';\nimport { FormsModule } from '@angular/forms';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatFormFieldModule } from '@angular/material/form-field';\nimport { MatInputModule } from '@angular/material/input';\nimport { MatDatepickerModule } from '@angular/material/datepicker';\nimport { MatNativeDateModule } from '@angular/material/core';\nimport { MatSelectModule } from '@angular/material/select';\nimport { ThemeToggleComponent } from '../shared/theme-toggle/theme-toggle.component';\nimport { take } from 'rxjs';\nexport let ProjectsComponent = class ProjectsComponent {\n  constructor(fb, datePipe, firestoreService) {\n    this.fb = fb;\n    this.datePipe = datePipe;\n    this.firestoreService = firestoreService;\n    this.projects = [];\n    this.filteredProjects = [];\n    this.isEditing = false;\n    this.editingProjectId = null;\n    this.projectStatuses = ['Not Started', 'In Progress', 'Completed'];\n    this.selectedDate = null;\n    this.showAllProjects = false;\n    // 🔍 Filtering states\n    this.filterProjectName = '';\n    this.filterAssignee = '';\n    this.filterStatus = '';\n    this.filterDate = null;\n    this.assigneeList = [];\n  }\n  ngOnInit() {\n    this.projectForm = this.fb.group({\n      name: ['', Validators.required],\n      assignee: [''],\n      dueDate: [null, Validators.required],\n      status: ['Not Started', Validators.required]\n    });\n    this.firestoreService.getProjects().pipe(take(1)).subscribe(projects => {\n      this.projects = projects;\n      this.assigneeList = [...new Set(this.projects.map(p => p.assignee).filter(a => !!a))];\n      this.applyFilters();\n    });\n  }\n  applyFilters() {\n    let temp = [...this.projects];\n    if (this.filterProjectName) {\n      temp = temp.filter(p => p.name.toLowerCase().includes(this.filterProjectName.toLowerCase()));\n    }\n    if (this.filterAssignee) {\n      temp = temp.filter(p => p.assignee === this.filterAssignee);\n    }\n    if (this.filterStatus) {\n      temp = temp.filter(p => p.status === this.filterStatus);\n    }\n    if (this.filterDate) {\n      const filterTime = new Date(this.filterDate).setHours(0, 0, 0, 0);\n      temp = temp.filter(p => {\n        const due = new Date(p.dueDate).setHours(0, 0, 0, 0);\n        return due === filterTime;\n      });\n    }\n    this.filteredProjects = temp.sort((a, b) => new Date(a.dueDate).getTime() - new Date(b.dueDate).getTime());\n  }\n  clearDateFilter() {\n    this.filterDate = null;\n    this.applyFilters();\n  }\n  showAddProjectForm() {\n    this.isEditing = true;\n    this.editingProjectId = null;\n    this.projectForm.reset({\n      status: 'Not Started'\n    });\n  }\n  editProject(project) {\n    this.isEditing = true;\n    this.editingProjectId = project.id || null;\n    this.projectForm.patchValue({\n      name: project.name,\n      description: project.description,\n      dueDate: project.dueDate,\n      status: project.status\n    });\n  }\n  saveProject() {\n    if (this.projectForm.invalid) return;\n    const formValue = this.projectForm.value;\n    const newProject = {\n      ...formValue\n    };\n    if (this.editingProjectId) {\n      this.firestoreService.updateProject(this.editingProjectId, newProject).pipe(take(1)).subscribe(() => {\n        const index = this.projects.findIndex(p => p.id === this.editingProjectId);\n        if (index > -1) this.projects[index] = {\n          ...this.projects[index],\n          ...newProject\n        };\n        this.afterChange();\n      });\n    } else {\n      this.firestoreService.addProject(newProject).pipe(take(1)).subscribe(docRef => {\n        this.projects.push({\n          id: docRef.id,\n          ...newProject\n        });\n        this.afterChange();\n      });\n    }\n  }\n  deleteProject(projectId) {\n    this.firestoreService.deleteProject(projectId).pipe(take(1)).subscribe(() => {\n      this.projects = this.projects.filter(p => p.id !== projectId);\n      this.afterChange();\n    });\n  }\n  afterChange() {\n    this.assigneeList = [...new Set(this.projects.map(p => p.assignee).filter(a => !!a))];\n    this.applyFilters();\n    this.cancelEdit();\n  }\n  cancelEdit() {\n    this.isEditing = false;\n    this.editingProjectId = null;\n    this.projectForm.reset({\n      status: 'Not Started'\n    });\n  }\n  toggleProjects() {\n    this.showAllProjects = !this.showAllProjects;\n  }\n};\nProjectsComponent = __decorate([Component({\n  selector: 'app-projects',\n  templateUrl: './projects.component.html',\n  styleUrls: ['./projects.component.scss'],\n  standalone: true,\n  imports: [CommonModule, ReactiveFormsModule, FormsModule, MatButtonModule, MatIconModule, MatFormFieldModule, MatInputModule, MatDatepickerModule, MatNativeDateModule, MatSelectModule, ThemeToggleComponent],\n  providers: [DatePipe]\n})], ProjectsComponent);","map":{"version":3,"names":["Component","CommonModule","DatePipe","ReactiveFormsModule","Validators","FormsModule","MatButtonModule","MatIconModule","MatFormFieldModule","MatInputModule","MatDatepickerModule","MatNativeDateModule","MatSelectModule","ThemeToggleComponent","take","ProjectsComponent","constructor","fb","datePipe","firestoreService","projects","filteredProjects","isEditing","editingProjectId","projectStatuses","selectedDate","showAllProjects","filterProjectName","filterAssignee","filterStatus","filterDate","assigneeList","ngOnInit","projectForm","group","name","required","assignee","dueDate","status","getProjects","pipe","subscribe","Set","map","p","filter","a","applyFilters","temp","toLowerCase","includes","filterTime","Date","setHours","due","sort","b","getTime","clearDateFilter","showAddProjectForm","reset","editProject","project","id","patchValue","description","saveProject","invalid","formValue","value","newProject","updateProject","index","findIndex","afterChange","addProject","docRef","push","deleteProject","projectId","cancelEdit","toggleProjects","__decorate","selector","templateUrl","styleUrls","standalone","imports","providers"],"sources":["/Users/vinithyareddy/Desktop/projects/my github projects/project-dashboard/src/app/projects/projects.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { CommonModule, DatePipe } from '@angular/common';\nimport { ReactiveFormsModule, FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { FormsModule } from '@angular/forms';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatFormFieldModule } from '@angular/material/form-field';\nimport { MatInputModule } from '@angular/material/input';\nimport { MatDatepickerModule } from '@angular/material/datepicker';\nimport { MatNativeDateModule } from '@angular/material/core';\nimport { MatSelectModule } from '@angular/material/select';\nimport { ThemeToggleComponent } from '../shared/theme-toggle/theme-toggle.component';\nimport { FirestoreService } from '../services/firestore.service';\nimport { Project } from '../models/project.model';\nimport { take } from 'rxjs';\n\n@Component({\n  selector: 'app-projects',\n  templateUrl: './projects.component.html',\n  styleUrls: ['./projects.component.scss'],\n  standalone: true,\n  imports: [\n    CommonModule,\n    ReactiveFormsModule,\n    FormsModule,\n    MatButtonModule,\n    MatIconModule,\n    MatFormFieldModule,\n    MatInputModule,\n    MatDatepickerModule,\n    MatNativeDateModule,\n    MatSelectModule,\n    ThemeToggleComponent\n  ],\n  providers: [DatePipe]\n})\nexport class ProjectsComponent implements OnInit {\n  projects: Project[] = [];\n  filteredProjects: Project[] = [];\n  projectForm!: FormGroup;\n  isEditing = false;\n  editingProjectId: string | null = null;\n  projectStatuses: string[] = ['Not Started', 'In Progress', 'Completed'];\n  selectedDate: Date | null = null;\n  showAllProjects = false;\n\n  // 🔍 Filtering states\n  filterProjectName: string = '';\n  filterAssignee: string = '';\n  filterStatus: string = '';\n  filterDate: Date | null = null;\n  assigneeList: string[] = [];\n\n  constructor(\n    private fb: FormBuilder,\n    private datePipe: DatePipe,\n    private firestoreService: FirestoreService\n  ) {}\n\n  ngOnInit(): void {\n    this.projectForm = this.fb.group({\n      name: ['', Validators.required],\n      assignee: [''], // ✅ Include this line\n      dueDate: [null, Validators.required],\n      status: ['Not Started', Validators.required]\n    });\n    \n\n    this.firestoreService.getProjects().pipe(take(1)).subscribe(projects => {\n      this.projects = projects;\n      this.assigneeList = [...new Set(this.projects.map(p => p.assignee).filter((a): a is string => !!a))];\n      this.applyFilters();\n    });\n  }\n\n  applyFilters(): void {\n    let temp = [...this.projects];\n\n    if (this.filterProjectName) {\n      temp = temp.filter(p => p.name.toLowerCase().includes(this.filterProjectName.toLowerCase()));\n    }\n\n    if (this.filterAssignee) {\n      temp = temp.filter(p => p.assignee === this.filterAssignee);\n    }\n\n    if (this.filterStatus) {\n      temp = temp.filter(p => p.status === this.filterStatus);\n    }\n\n    if (this.filterDate) {\n      const filterTime = new Date(this.filterDate).setHours(0, 0, 0, 0);\n      temp = temp.filter(p => {\n        const due = new Date(p.dueDate).setHours(0, 0, 0, 0);\n        return due === filterTime;\n      });\n    }\n\n    this.filteredProjects = temp.sort((a, b) => new Date(a.dueDate).getTime() - new Date(b.dueDate).getTime());\n  }\n\n  clearDateFilter(): void {\n    this.filterDate = null;\n    this.applyFilters();\n  }\n\n  showAddProjectForm(): void {\n    this.isEditing = true;\n    this.editingProjectId = null;\n    this.projectForm.reset({ status: 'Not Started' });\n  }\n\n  editProject(project: Project): void {\n    this.isEditing = true;\n    this.editingProjectId = project.id || null;\n    this.projectForm.patchValue({\n      name: project.name,\n      description: project.description,\n      dueDate: project.dueDate,\n      status: project.status\n    });\n  }\n\n  saveProject(): void {\n    if (this.projectForm.invalid) return;\n    const formValue = this.projectForm.value;\n    const newProject: Project = { ...formValue };\n\n    if (this.editingProjectId) {\n      this.firestoreService.updateProject(this.editingProjectId, newProject).pipe(take(1)).subscribe(() => {\n        const index = this.projects.findIndex(p => p.id === this.editingProjectId);\n        if (index > -1) this.projects[index] = { ...this.projects[index], ...newProject };\n        this.afterChange();\n      });\n    } else {\n      this.firestoreService.addProject(newProject).pipe(take(1)).subscribe(docRef => {\n        this.projects.push({ id: docRef.id, ...newProject });\n        this.afterChange();\n      });\n    }\n  }\n\n  deleteProject(projectId: string): void {\n    this.firestoreService.deleteProject(projectId).pipe(take(1)).subscribe(() => {\n      this.projects = this.projects.filter(p => p.id !== projectId);\n      this.afterChange();\n    });\n  }\n\n  afterChange(): void {\n    this.assigneeList = [...new Set(this.projects.map(p => p.assignee).filter((a): a is string => !!a))];\n    this.applyFilters();\n    this.cancelEdit();\n  }\n\n  cancelEdit(): void {\n    this.isEditing = false;\n    this.editingProjectId = null;\n    this.projectForm.reset({ status: 'Not Started' });\n  }\n\n  toggleProjects(): void {\n    this.showAllProjects = !this.showAllProjects;\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}