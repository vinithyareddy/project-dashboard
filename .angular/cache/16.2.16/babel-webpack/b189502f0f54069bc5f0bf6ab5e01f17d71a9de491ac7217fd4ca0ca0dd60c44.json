{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { ThemeToggleComponent } from '../shared/theme-toggle/theme-toggle.component';\nimport { take } from 'rxjs';\nexport let CalendarComponent = class CalendarComponent {\n  constructor(firestoreService, refreshService) {\n    this.firestoreService = firestoreService;\n    this.refreshService = refreshService;\n    this.currentDate = new Date();\n    this.calendar = [];\n    this.tasks = [];\n    this.projects = [];\n    this.currentMonth = this.currentDate.getMonth();\n    this.currentYear = this.currentDate.getFullYear();\n  }\n  ngOnInit() {\n    this.generateCalendar();\n    this.loadData(); // 🔁 Initial fetch\n    // ✅ Reload on file upload\n    this.refreshService.refresh$.subscribe(() => {\n      this.loadData();\n    });\n  }\n  loadData() {\n    this.firestoreService.getTasks().pipe(take(1)).subscribe(tasks => {\n      this.tasks = tasks;\n    });\n    this.firestoreService.getProjects().pipe(take(1)).subscribe(projects => {\n      this.projects = projects;\n    });\n  }\n  generateCalendar() {\n    const firstDay = new Date(this.currentYear, this.currentMonth, 1);\n    const lastDay = new Date(this.currentYear, this.currentMonth + 1, 0);\n    const weeks = [];\n    let currentWeek = [];\n    const startingDay = firstDay.getDay();\n    for (let i = 0; i < startingDay; i++) currentWeek.push(null);\n    for (let day = 1; day <= lastDay.getDate(); day++) {\n      if (currentWeek.length === 7) {\n        weeks.push(currentWeek);\n        currentWeek = [];\n      }\n      currentWeek.push(new Date(this.currentYear, this.currentMonth, day));\n    }\n    while (currentWeek.length < 7) currentWeek.push(null);\n    weeks.push(currentWeek);\n    this.calendar = weeks;\n  }\n  getTasksForDate(date) {\n    if (!date) return [];\n    return this.tasks.filter(task => {\n      const taskDate = task.dueDate instanceof Date ? task.dueDate : task.dueDate.toDate();\n      return taskDate.getDate() === date.getDate() && taskDate.getMonth() === date.getMonth() && taskDate.getFullYear() === date.getFullYear();\n    });\n  }\n  getProjectsForDate(date) {\n    if (!date) return [];\n    return this.projects.filter(project => {\n      const projectDate = new Date(project.dueDate);\n      return projectDate.getDate() === date.getDate() && projectDate.getMonth() === date.getMonth() && projectDate.getFullYear() === date.getFullYear();\n    });\n  }\n  previousMonth() {\n    if (this.currentMonth === 0) {\n      this.currentMonth = 11;\n      this.currentYear--;\n    } else {\n      this.currentMonth--;\n    }\n    this.generateCalendar();\n  }\n  nextMonth() {\n    if (this.currentMonth === 11) {\n      this.currentMonth = 0;\n      this.currentYear++;\n    } else {\n      this.currentMonth++;\n    }\n    this.generateCalendar();\n  }\n  getMonthName() {\n    return new Date(this.currentYear, this.currentMonth).toLocaleString('default', {\n      month: 'long'\n    });\n  }\n};\nCalendarComponent = __decorate([Component({\n  selector: 'app-calendar',\n  templateUrl: './calendar.component.html',\n  styleUrls: ['./calendar.component.scss'],\n  standalone: true,\n  imports: [CommonModule, ThemeToggleComponent]\n})], CalendarComponent);","map":{"version":3,"names":["Component","CommonModule","ThemeToggleComponent","take","CalendarComponent","constructor","firestoreService","refreshService","currentDate","Date","calendar","tasks","projects","currentMonth","getMonth","currentYear","getFullYear","ngOnInit","generateCalendar","loadData","refresh$","subscribe","getTasks","pipe","getProjects","firstDay","lastDay","weeks","currentWeek","startingDay","getDay","i","push","day","getDate","length","getTasksForDate","date","filter","task","taskDate","dueDate","toDate","getProjectsForDate","project","projectDate","previousMonth","nextMonth","getMonthName","toLocaleString","month","__decorate","selector","templateUrl","styleUrls","standalone","imports"],"sources":["/Users/vinithyareddy/Desktop/projects/my github projects/project-dashboard/src/app/calendar/calendar.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { ThemeToggleComponent } from '../shared/theme-toggle/theme-toggle.component';\nimport { FirestoreService } from '../services/firestore.service';\nimport { Task } from '../models/task.model';\nimport { Project } from '../models/project.model';\nimport { take } from 'rxjs';\nimport { RefreshService } from 'src/app/services/refresh.service';\n\n\n@Component({\n  selector: 'app-calendar',\n  templateUrl: './calendar.component.html',\n  styleUrls: ['./calendar.component.scss'],\n  standalone: true,\n  imports: [CommonModule, ThemeToggleComponent]\n})\nexport class CalendarComponent implements OnInit {\n  currentDate = new Date();\n  currentMonth: number;\n  currentYear: number;\n  calendar: (Date | null)[][] = [];\n  tasks: Task[] = [];\n  projects: Project[] = [];\n\n  constructor(private firestoreService: FirestoreService,   private refreshService: RefreshService) {\n    this.currentMonth = this.currentDate.getMonth();\n    this.currentYear = this.currentDate.getFullYear();\n  }\n\n\n  ngOnInit() {\n    this.generateCalendar();\n    this.loadData(); // 🔁 Initial fetch\n\n    // ✅ Reload on file upload\n    this.refreshService.refresh$.subscribe(() => {\n      this.loadData();\n    });\n  }\n\n  loadData(): void {\n    this.firestoreService.getTasks().pipe(take(1)).subscribe(tasks => {\n      this.tasks = tasks;\n    });\n\n    this.firestoreService.getProjects().pipe(take(1)).subscribe(projects => {\n      this.projects = projects;\n    });\n  }\n  generateCalendar() {\n    const firstDay = new Date(this.currentYear, this.currentMonth, 1);\n    const lastDay = new Date(this.currentYear, this.currentMonth + 1, 0);\n    const weeks: (Date | null)[][] = [];\n    let currentWeek: (Date | null)[] = [];\n    const startingDay = firstDay.getDay();\n\n    for (let i = 0; i < startingDay; i++) currentWeek.push(null);\n\n    for (let day = 1; day <= lastDay.getDate(); day++) {\n      if (currentWeek.length === 7) {\n        weeks.push(currentWeek);\n        currentWeek = [];\n      }\n      currentWeek.push(new Date(this.currentYear, this.currentMonth, day));\n    }\n\n    while (currentWeek.length < 7) currentWeek.push(null);\n    weeks.push(currentWeek);\n    this.calendar = weeks;\n  }\n\n  getTasksForDate(date: Date | null): Task[] {\n    if (!date) return [];\n    return this.tasks.filter(task => {\n      const taskDate = task.dueDate instanceof Date ? task.dueDate : task.dueDate.toDate();\n      return taskDate.getDate() === date.getDate() &&\n             taskDate.getMonth() === date.getMonth() &&\n             taskDate.getFullYear() === date.getFullYear();\n    });\n  }\n\n  getProjectsForDate(date: Date | null): Project[] {\n    if (!date) return [];\n    return this.projects.filter(project => {\n      const projectDate = new Date(project.dueDate);\n      return projectDate.getDate() === date.getDate() &&\n             projectDate.getMonth() === date.getMonth() &&\n             projectDate.getFullYear() === date.getFullYear();\n    });\n  }\n\n  previousMonth() {\n    if (this.currentMonth === 0) {\n      this.currentMonth = 11;\n      this.currentYear--;\n    } else {\n      this.currentMonth--;\n    }\n    this.generateCalendar();\n  }\n\n  nextMonth() {\n    if (this.currentMonth === 11) {\n      this.currentMonth = 0;\n      this.currentYear++;\n    } else {\n      this.currentMonth++;\n    }\n    this.generateCalendar();\n  }\n\n  getMonthName(): string {\n    return new Date(this.currentYear, this.currentMonth).toLocaleString('default', { month: 'long' });\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}