<div class="sidebar" [class.active]="!isCollapsed" [class.collapsed]="isCollapsed">

  <nav class="nav-menu">
    <a routerLink="/dashboard" routerLinkActive="active" class="nav-item">
      <span class="nav-icon">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
          <path
            d="M4 13h6a1 1 0 0 0 1-1V4a1 1 0 0 0-1-1H4a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1zm0 8h6a1 1 0 0 0 1-1v-4a1 1 0 0 0-1-1H4a1 1 0 0 0-1 1v4a1 1 0 0 0 1 1zm10 0h6a1 1 0 0 0 1-1v-8a1 1 0 0 0-1-1h-6a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1zm0-12h6a1 1 0 0 0 1-1V4a1 1 0 0 0-1-1h-6a1 1 0 0 0-1 1v4a1 1 0 0 0 1 1z"
            fill="black" />
        </svg>
      </span>
      <span class="nav-text">Dashboard</span>
    </a>

    <a routerLink="/projects" routerLinkActive="active" class="nav-item">
      <span class="nav-icon">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
          <path
            d="M3 3h18a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1zm1 2v14h16V5H4zm2 2h12v2H6V7zm0 4h12v2H6v-2zm0 4h8v2H6v-2z"
            fill="black" />
        </svg>
      </span>
      <span class="nav-text">Projects</span>
    </a>

    <a routerLink="/teams" routerLinkActive="active" class="nav-item">
      <span class="nav-icon">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
          <path d="M12 11a4 4 0 1 0-4-4 4 4 0 0 0 4 4zm6 10a1 1 0 0 0 1-1 7 7 0 0 0-14 0 1 1 0 0 0 1 1z" fill="black" />
        </svg>
      </span>
      <span class="nav-text">Teams</span>
    </a>

    <a routerLink="/tasks" routerLinkActive="active" class="nav-item">
      <span class="nav-icon">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
          <path
            d="M12 22a10 10 0 1 1 0-20 10 10 0 0 1 0 20zm0-2a8 8 0 1 0 0-16 8 8 0 0 0 0 16zm1-8.41l2.54 2.53a1 1 0 0 1-1.42 1.42L11.3 12.7A1 1 0 0 1 11 12V8a1 1 0 0 1 2 0v3.59z"
            fill="black" />
        </svg>
      </span>
      <span class="nav-text">Tasks</span>
    </a>

    <a routerLink="/calendar" routerLinkActive="active" class="nav-item">
      <span class="nav-icon">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
          <path
            d="M17 3h4a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h4V1h2v2h6V1h2v2zm-2 2H9v2H7V5H4v4h16V5h-3v2h-2V5zm5 6H4v8h16v-8z"
            fill="black" />
        </svg>
      </span>
      <span class="nav-text">Calendar</span>
    </a>

    <ng-container *ngIf="user$ | async as user">
      <a class="nav-item" [matMenuTriggerFor]="userMenu">
        <span class="nav-icon">
          <mat-icon>account_circle</mat-icon>
        </span>
        <span class="nav-text">Logout</span>
      </a>

      <mat-menu #userMenu="matMenu">
        <button mat-menu-item class="user-info-item">
          <mat-icon class="user-icon">mail</mat-icon>
          <span><strong>Email:</strong> {{ user.email }}</span>
        </button>
        <button mat-menu-item (click)="openChangePasswordDialog()">
          <mat-icon class="user-icon">lock</mat-icon>
          <span>Change Password</span>
        </button>
        <button mat-menu-item (click)="logout()">
          <mat-icon class="user-icon">logout</mat-icon>
          <span>Logout</span>
        </button>
      </mat-menu>
    </ng-container>

    <ng-template #loginBtn>
      <a class="nav-item" routerLink="/auth">
        <span class="nav-icon">
          <mat-icon>login</mat-icon>
        </span>
        <span class="nav-text">Login</span>
      </a>
    </ng-template>

  </nav>


  <div class="toggle-button-container">
    <button mat-icon-button (click)="onToggleSidebar()" aria-label="Toggle Sidebar">
      <mat-icon>{{ isCollapsed ? 'keyboard_arrow_right' : 'keyboard_arrow_left' }}</mat-icon>
    </button>
  </div>
</div>