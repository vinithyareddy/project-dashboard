<app-theme-toggle class="theme-toggle-icon"></app-theme-toggle>

<div class="dashboard-container-original">

  <!-- Left Column -->
  <div class="left-column">
    <!-- Task Status Card -->
    <div class="dashboard-card task-status-card-original">
      <h2>Task Status</h2>
      <div class="donut-chart-container">
        <canvas #donutChart></canvas>
      </div>
      <div class="status-legend-original">
        <div class="status-item">
          <span class="status-dot completed"></span>
          <span class="status-text">Completed</span>
          <span class="status-count">{{ tasksCompleted }}</span>
        </div>
        <div class="status-item">
          <span class="status-dot in-progress"></span>
          <span class="status-text">In Progress</span>
          <span class="status-count">{{ tasksInProgress }}</span>
        </div>
        <div class="status-item">
          <span class="status-dot not-started"></span>
          <span class="status-text">Not Started</span>
          <span class="status-count">{{ tasksNotStarted }}</span>
        </div>
      </div>
    </div>

    <!-- Task Summary Card -->
    <div class="dashboard-card task-summary-card-original">
      <h2>Task Summary</h2>
      <div class="summary-list">
        <div class="summary-item">
          <span>Total Tasks</span>
          <span>{{ totalTasks }}</span>
        </div>
        <div class="summary-item">
          <span>Completed</span>
          <span>{{ tasksCompleted }}</span>
        </div>
        <div class="summary-item">
          <span>In Progress</span>
          <span>{{ tasksInProgress }}</span>
        </div>
        <div class="summary-item">
          <span>Not Started</span>
          <span class="overdue">{{ tasksNotStarted }}</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Right Column -->
  <div class="right-column">
    <!-- Project Overview Card -->
    <div class="dashboard-card project-overview-card-original">
      <h2>Project Overview</h2>
      <div *ngFor="let project of (showAllProjects ? projects : projects.slice(0, 2))">
        <h3>{{ project.name }}</h3>
        <div class="progress-bar-original">
          <div class="progress-fill" [style.width.%]="project.progress"></div>
        </div>
        <div class="progress-percentage-line">{{ project.progress }}%</div>

        <div class="progress-info">
          <span *ngIf="showAllProjects" class="days-remaining">{{ project.dueDate | date:'MMM d, yyyy' }}</span>
        </div>
      </div>
      <div class="show-more-container">
        <button mat-stroked-button (click)="toggleProjects()">
          <mat-icon>{{ showAllProjects ? 'expand_less' : 'expand_more' }}</mat-icon>
          {{ showAllProjects ? 'Show Less' : 'Show More' }}
        </button>
      </div>
    </div>

    <!-- Team Performance Card -->
    <div class="dashboard-card team-performance-card-original">
      <h2>Team Performance</h2>
      <div class="performance-chart-container">
        <canvas #performanceChart></canvas>
      </div>
    </div>

    <!-- Upcoming Deadlines Card -->
    <div class="dashboard-card upcoming-deadlines-card-original">
      <h2>Upcoming Deadlines</h2>
      <div class="deadline-list-original">
        <div class="deadline-item" *ngFor="let deadline of (showAllTasks ? upcomingDeadlines : upcomingDeadlines.slice(0, 3))">
          <span class="item-name">{{ deadline.name }}</span>
          <span class="due-date">{{ deadline.deadline | date:'MMM d, yyyy' }}</span>
        </div>
        <div *ngIf="upcomingDeadlines.length === 0" class="no-items">
          No upcoming deadlines.
        </div>
      </div>
      <div *ngIf="upcomingDeadlines.length > 3" class="show-more-container">
        <button mat-stroked-button (click)="toggleTasks()">
          <mat-icon>{{ showAllTasks ? 'expand_less' : 'expand_more' }}</mat-icon>
          {{ showAllTasks ? 'Show Less' : 'Show More' }}
        </button>
      </div>
    </div>
  </div>

</div>
