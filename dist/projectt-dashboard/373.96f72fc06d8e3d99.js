"use strict";(self.webpackChunkprojectt_dashboard=self.webpackChunkprojectt_dashboard||[]).push([[373],{373:(w,g,e)=>{e.r(g),e.d(g,{AuthComponent:()=>E});var C=e(467),l=e(177),r=e(9417),u=e(8834),c=e(882),d=e(9631),h=e(9213),f=e(7062),p=e(4796),t=e(7705);function P(i,m){if(1&i){const o=t.RV6();t.qex(0),t.j41(1,"mat-form-field",4)(2,"mat-label"),t.EFF(3,"Confirm Password"),t.k0s(),t.nrm(4,"input",11),t.j41(5,"button",6),t.bIt("click",function(){t.eBV(o);const n=t.XpG();return t.Njj(n.toggleConfirmVisibility())}),t.j41(6,"mat-icon"),t.EFF(7),t.k0s()()(),t.bVm()}if(2&i){const o=t.XpG();t.R7$(4),t.Y8G("type",o.showConfirm?"text":"password"),t.R7$(1),t.BMQ("aria-label","Toggle Confirm Password"),t.R7$(2),t.JRh(o.showConfirm?"visibility_off":"visibility")}}const b=function(i,m){return{success:i,error:m}};function O(i,m){if(1&i&&(t.j41(0,"div",12),t.EFF(1),t.k0s()),2&i){const o=t.XpG();t.Y8G("ngClass",t.l_i(2,b,o.errorMsg.includes("\u2705"),o.errorMsg.includes("\u274c"))),t.R7$(1),t.SpI(" ",o.errorMsg," ")}}let E=(()=>{class i{constructor(o,a,n){this.fb=o,this.authService=a,this.router=n,this.isRegisterMode=!1,this.errorMsg="",this.showPassword=!1,this.showConfirm=!1,this.authForm=this.fb.group({name:[""],phone:[""],email:["",[r.k0.required,r.k0.email]],password:["",[r.k0.required,r.k0.minLength(6)]],confirmPassword:[""]})}ngOnInit(){this.authService.getUser().subscribe(o=>{o&&this.router.navigate(["/dashboard"])})}toggleMode(){this.isRegisterMode=!this.isRegisterMode,this.errorMsg=""}togglePasswordVisibility(){this.showPassword=!this.showPassword}toggleConfirmVisibility(){this.showConfirm=!this.showConfirm}onSubmit(){var o=this;return(0,C.A)(function*(){if(o.authForm.invalid)return;const{name:a,phone:n,email:s,password:_,confirmPassword:R}=o.authForm.value;if(o.isRegisterMode&&_!==R)o.errorMsg="\u274c Passwords do not match";else try{o.isRegisterMode?(yield o.authService.registerWithProfile({name:a,phone:n,email:s,password:_}),o.errorMsg="\u2705 Account has been created"):yield o.authService.login(s,_),o.router.navigate(["/dashboard"])}catch(M){switch(M.code||""){case"auth/invalid-login-credentials":case"auth/user-not-found":case"auth/wrong-password":o.errorMsg="\u274c Invalid Credentials";break;case"auth/email-already-in-use":o.errorMsg="\u274c Email already in use";break;case"auth/too-many-requests":o.errorMsg="\u274c Too many attempts. Try again later.";break;default:o.errorMsg=M.message||"\u274c An unexpected error occurred"}}})()}static{this.\u0275fac=function(a){return new(a||i)(t.rXU(r.ok),t.rXU(p.u),t.rXU(f.Ix))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-auth"]],standalone:!0,features:[t.Jv_([p.u]),t.aNF],decls:21,vars:9,consts:[[1,"auth-container"],[3,"formGroup","ngSubmit"],["appearance","outline",1,"full-width","custom-field"],["matInput","","formControlName","email","type","email",1,"custom-input"],["appearance","outline",1,"full-width","password-field"],["matInput","","formControlName","password",1,"custom-input",3,"type"],["mat-icon-button","","matSuffix","","type","button",3,"click"],[4,"ngIf"],["class","error-msg",3,"ngClass",4,"ngIf"],["mat-raised-button","","color","primary","type","submit",1,"full-width"],["mat-button","","color","accent","type","button",1,"full-width",3,"click"],["matInput","","formControlName","confirmPassword",1,"custom-input",3,"type"],[1,"error-msg",3,"ngClass"]],template:function(a,n){1&a&&(t.j41(0,"div",0)(1,"h2"),t.EFF(2),t.k0s(),t.j41(3,"form",1),t.bIt("ngSubmit",function(){return n.onSubmit()}),t.j41(4,"mat-form-field",2)(5,"mat-label"),t.EFF(6,"Email"),t.k0s(),t.nrm(7,"input",3),t.k0s(),t.j41(8,"mat-form-field",4)(9,"mat-label"),t.EFF(10,"Password"),t.k0s(),t.nrm(11,"input",5),t.j41(12,"button",6),t.bIt("click",function(){return n.togglePasswordVisibility()}),t.j41(13,"mat-icon"),t.EFF(14),t.k0s()()(),t.DNE(15,P,8,3,"ng-container",7),t.DNE(16,O,2,5,"div",8),t.j41(17,"button",9),t.EFF(18),t.k0s(),t.j41(19,"button",10),t.bIt("click",function(){return n.toggleMode()}),t.EFF(20),t.k0s()()()),2&a&&(t.R7$(2),t.JRh(n.isRegisterMode?"Register":"Login"),t.R7$(1),t.Y8G("formGroup",n.authForm),t.R7$(8),t.Y8G("type",n.showPassword?"text":"password"),t.R7$(1),t.BMQ("aria-label","Toggle Password"),t.R7$(2),t.JRh(n.showPassword?"visibility_off":"visibility"),t.R7$(1),t.Y8G("ngIf",n.isRegisterMode),t.R7$(1),t.Y8G("ngIf",n.errorMsg),t.R7$(2),t.SpI(" ",n.isRegisterMode?"Register":"Login"," "),t.R7$(2),t.SpI(" Switch to ",n.isRegisterMode?"Login":"Register"," "))},dependencies:[l.MD,l.YU,l.bT,r.X1,r.qT,r.me,r.BC,r.cb,r.j4,r.JD,u.Hl,u.$z,u.iY,c.RG,c.rl,c.nJ,c.yw,d.fS,d.fg,h.m_,h.An,f.iI],styles:[".auth-container[_ngcontent-%COMP%]{max-width:400px;margin:4rem auto;padding:2rem;background:#fff;border-radius:12px;box-shadow:0 8px 16px #0000001a}.auth-container[_ngcontent-%COMP%]   input.mat-input-element[_ngcontent-%COMP%]{color:#333!important;caret-color:#000}.auth-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::placeholder{color:#999!important}.auth-container[_ngcontent-%COMP%]   mat-label[_ngcontent-%COMP%]{color:#555}.auth-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:1.5rem}.auth-container[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]{width:100%;margin-bottom:1rem}.auth-container[_ngcontent-%COMP%]   .error-msg[_ngcontent-%COMP%]{margin:10px 0;font-weight:500;text-align:center}.auth-container[_ngcontent-%COMP%]   .error-msg.success[_ngcontent-%COMP%]{color:#2ecc71}.auth-container[_ngcontent-%COMP%]   .error-msg.error[_ngcontent-%COMP%]{color:#e74c3c}.auth-container[_ngcontent-%COMP%]   .password-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{letter-spacing:1px}.auth-container[_ngcontent-%COMP%]   .password-field[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;color:#333}  input.mat-input-element{color:#000!important;caret-color:#000!important;background-color:#fff!important}  .mat-form-field-infix{background-color:#fff!important}  .mat-input-element::placeholder{color:#999!important}.custom-input[_ngcontent-%COMP%]{color:#000!important;caret-color:#000!important;background-color:#fff!important}"]})}}return i})()}}]);