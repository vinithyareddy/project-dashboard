"use strict";(self.webpackChunkprojectt_dashboard=self.webpackChunkprojectt_dashboard||[]).push([[373],{373:(R,_,i)=>{i.r(_),i.d(_,{AuthComponent:()=>E});var C=i(467),u=i(177),a=i(9417),m=i(8834),l=i(882),h=i(9631),f=i(9213),M=i(7062),p=i(4796),t=i(7705);function P(r,g){if(1&r){const n=t.RV6();t.j41(0,"div",13)(1,"a",14),t.bIt("click",function(e){t.eBV(n);const s=t.XpG();return t.Njj(s.onForgotPassword(e))}),t.EFF(2,"Forgot password?"),t.k0s()()}}function O(r,g){if(1&r){const n=t.RV6();t.qex(0),t.j41(1,"mat-form-field",5)(2,"mat-label"),t.EFF(3,"Confirm Password"),t.k0s(),t.nrm(4,"input",15),t.j41(5,"button",7),t.bIt("click",function(){t.eBV(n);const e=t.XpG();return t.Njj(e.toggleConfirmVisibility())}),t.j41(6,"mat-icon"),t.EFF(7),t.k0s()()(),t.bVm()}if(2&r){const n=t.XpG();t.R7$(4),t.Y8G("type",n.showConfirm?"text":"password"),t.R7$(1),t.BMQ("aria-label","Toggle Confirm Password"),t.R7$(2),t.JRh(n.showConfirm?"visibility_off":"visibility")}}const b=function(r,g){return{success:r,error:g}};function w(r,g){if(1&r&&(t.j41(0,"div",16),t.EFF(1),t.k0s()),2&r){const n=t.XpG();t.Y8G("ngClass",t.l_i(2,b,n.errorMsg.includes("\u2705"),n.errorMsg.includes("\u274c"))),t.R7$(1),t.SpI(" ",n.errorMsg," ")}}let E=(()=>{class r{constructor(n,o,e){this.fb=n,this.authService=o,this.router=e,this.isRegisterMode=!1,this.errorMsg="",this.showPassword=!1,this.showConfirm=!1,this.authForm=this.fb.group({name:[""],phone:[""],email:["",[a.k0.required,a.k0.email]],password:["",[a.k0.minLength(6)]],confirmPassword:[""]})}ngOnInit(){this.authService.getUser().subscribe(n=>{n&&this.router.navigate(["/dashboard"])})}toggleMode(){this.isRegisterMode=!this.isRegisterMode,this.errorMsg="",this.authForm.get("password")?.reset(),this.authForm.get("confirmPassword")?.reset()}togglePasswordVisibility(){this.showPassword=!this.showPassword}toggleConfirmVisibility(){this.showConfirm=!this.showConfirm}onForgotPassword(n){n.preventDefault();const o=this.authForm.get("email")?.value;console.log("\u{1f4e9} Forgot password triggered with email:",o),o?this.authService.sendPasswordResetEmail(o).then(()=>{this.errorMsg="\u2705 Password reset link sent to your email"}).catch(e=>{switch(e.code||""){case"auth/invalid-email":this.errorMsg="\u274c Invalid email format";break;case"auth/user-not-found":this.errorMsg="\u274c Email not found";break;default:this.errorMsg="\u274c Failed to send reset email"}}):this.errorMsg="\u274c Please enter your email to reset password"}onSubmit(){var n=this;return(0,C.A)(function*(){const{name:o,phone:e,email:s,password:c,confirmPassword:v}=n.authForm.value;if(s)if(n.isRegisterMode){if(!c||c.length<6)return void(n.errorMsg="\u274c Password must be at least 6 characters");if(c!==v)return void(n.errorMsg="\u274c Passwords do not match");try{yield n.authService.registerWithProfile({name:o,phone:e,email:s,password:c}),n.errorMsg="\u2705 Account has been created",n.router.navigate(["/dashboard"])}catch(d){n.handleFirebaseError(d)}}else if(c)try{yield n.authService.login(s,c),n.router.navigate(["/dashboard"])}catch(d){n.handleFirebaseError(d)}else n.errorMsg="\u274c Password is required";else n.errorMsg="\u274c Email is required"})()}handleFirebaseError(n){switch(n.code||""){case"auth/invalid-login-credentials":case"auth/user-not-found":case"auth/wrong-password":this.errorMsg="\u274c Invalid Credentials";break;case"auth/email-already-in-use":this.errorMsg="\u274c Email already in use";break;case"auth/too-many-requests":this.errorMsg="\u274c Too many attempts. Try again later.";break;default:this.errorMsg=n.message||"\u274c An unexpected error occurred"}}static{this.\u0275fac=function(o){return new(o||r)(t.rXU(a.ok),t.rXU(p.u),t.rXU(M.Ix))}}static{this.\u0275cmp=t.VBU({type:r,selectors:[["app-auth"]],standalone:!0,features:[t.Jv_([p.u]),t.aNF],decls:23,vars:10,consts:[[1,"auth-outer-wrapper"],[1,"auth-container"],[3,"formGroup","ngSubmit"],["appearance","outline",1,"full-width","custom-field"],["matInput","","formControlName","email","type","email",1,"custom-input"],["appearance","outline",1,"full-width","password-field"],["matInput","","formControlName","password",1,"custom-input",3,"type"],["mat-icon-button","","matSuffix","","type","button",3,"click"],["class","forgot-link",4,"ngIf"],[4,"ngIf"],["class","error-msg",3,"ngClass",4,"ngIf"],["mat-raised-button","","color","primary","type","submit",1,"full-width"],["mat-button","","color","accent","type","button",1,"full-width",3,"click"],[1,"forgot-link"],["href","#",3,"click"],["matInput","","formControlName","confirmPassword",1,"custom-input",3,"type"],[1,"error-msg",3,"ngClass"]],template:function(o,e){1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"h2"),t.EFF(3),t.k0s(),t.j41(4,"form",2),t.bIt("ngSubmit",function(){return e.onSubmit()}),t.j41(5,"mat-form-field",3)(6,"mat-label"),t.EFF(7,"Email"),t.k0s(),t.nrm(8,"input",4),t.k0s(),t.j41(9,"mat-form-field",5)(10,"mat-label"),t.EFF(11,"Password"),t.k0s(),t.nrm(12,"input",6),t.j41(13,"button",7),t.bIt("click",function(){return e.togglePasswordVisibility()}),t.j41(14,"mat-icon"),t.EFF(15),t.k0s()()(),t.DNE(16,P,3,0,"div",8),t.DNE(17,O,8,3,"ng-container",9),t.DNE(18,w,2,5,"div",10),t.j41(19,"button",11),t.EFF(20),t.k0s(),t.j41(21,"button",12),t.bIt("click",function(){return e.toggleMode()}),t.EFF(22),t.k0s()()()()),2&o&&(t.R7$(3),t.JRh(e.isRegisterMode?"Register":"Login"),t.R7$(1),t.Y8G("formGroup",e.authForm),t.R7$(8),t.Y8G("type",e.showPassword?"text":"password"),t.R7$(1),t.BMQ("aria-label","Toggle Password"),t.R7$(2),t.JRh(e.showPassword?"visibility_off":"visibility"),t.R7$(1),t.Y8G("ngIf",!e.isRegisterMode),t.R7$(1),t.Y8G("ngIf",e.isRegisterMode),t.R7$(1),t.Y8G("ngIf",e.errorMsg),t.R7$(2),t.SpI(" ",e.isRegisterMode?"Register":"Login"," "),t.R7$(2),t.SpI(" Switch to ",e.isRegisterMode?"Login":"Register"," "))},dependencies:[u.MD,u.YU,u.bT,a.X1,a.qT,a.me,a.BC,a.cb,a.j4,a.JD,m.Hl,m.$z,m.iY,l.RG,l.rl,l.nJ,l.yw,h.fS,h.fg,f.m_,f.An,M.iI],styles:[".auth-outer-wrapper[_ngcontent-%COMP%]{height:100vh;display:flex;justify-content:center;align-items:center;background:linear-gradient(to bottom right,#e9ecf5,#dcdff0)}.auth-container[_ngcontent-%COMP%]{width:100%;max-width:400px;padding:2.5rem;background-color:#2c2f36;border-radius:14px;box-shadow:0 10px 30px #0003;color:#f4f4f4;font-family:Inter,sans-serif;text-align:center}.auth-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;margin-bottom:2rem;color:#fff}.auth-container[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]{width:100%;margin-bottom:1.5rem}.auth-container[_ngcontent-%COMP%]   .custom-field[_ngcontent-%COMP%]   .mat-form-field-outline[_ngcontent-%COMP%], .auth-container[_ngcontent-%COMP%]   .password-field[_ngcontent-%COMP%]   .mat-form-field-outline[_ngcontent-%COMP%]{color:#666}.auth-container[_ngcontent-%COMP%]   .custom-field[_ngcontent-%COMP%]   .mat-form-field-wrapper[_ngcontent-%COMP%], .auth-container[_ngcontent-%COMP%]   .password-field[_ngcontent-%COMP%]   .mat-form-field-wrapper[_ngcontent-%COMP%]{padding:.5rem 0}.auth-container[_ngcontent-%COMP%]   .custom-field[_ngcontent-%COMP%]   .mat-input-element[_ngcontent-%COMP%], .auth-container[_ngcontent-%COMP%]   .password-field[_ngcontent-%COMP%]   .mat-input-element[_ngcontent-%COMP%]{color:#f4f4f4}.auth-container[_ngcontent-%COMP%]   .custom-field[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .auth-container[_ngcontent-%COMP%]   .password-field[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#b0b0b0}.auth-container[_ngcontent-%COMP%]   .primary-btn[_ngcontent-%COMP%]{background-color:#5c6bf2;color:#fff;font-weight:600;border-radius:8px;height:40px;margin-top:10px}.auth-container[_ngcontent-%COMP%]   .primary-btn[_ngcontent-%COMP%]:hover{background-color:#4a5de0}.auth-container[_ngcontent-%COMP%]   .forgot-link[_ngcontent-%COMP%]{text-align:right;margin-top:-1rem;margin-bottom:1.5rem}.auth-container[_ngcontent-%COMP%]   .forgot-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:.85rem;color:#9aa6f2;text-decoration:none}.auth-container[_ngcontent-%COMP%]   .forgot-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.auth-container[_ngcontent-%COMP%]   .switch-mode[_ngcontent-%COMP%]{font-size:.9rem;margin-top:1.5rem;color:#c9c9c9}.auth-container[_ngcontent-%COMP%]   .switch-mode[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#9aa6f2;text-decoration:none;margin-left:6px}.auth-container[_ngcontent-%COMP%]   .switch-mode[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.auth-container[_ngcontent-%COMP%]   .error-msg[_ngcontent-%COMP%]{font-weight:500;margin:10px 0;font-size:.85rem;text-align:center}.auth-container[_ngcontent-%COMP%]   .error-msg.success[_ngcontent-%COMP%]{color:#4cd964}.auth-container[_ngcontent-%COMP%]   .error-msg.error[_ngcontent-%COMP%]{color:#ff4d4f}.error-msg[_ngcontent-%COMP%]{color:red;font-size:1rem;font-weight:700;margin-top:1rem}"]})}}return r})()}}]);